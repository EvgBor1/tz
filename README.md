# tz
Скачайте и запустите на сервере под локальным администратором файлик init.ps1

Что произойдёт:
 - Установится Windows PowerShell Desired State Configuration Service
 - Установится FrameWork 4.5.2 + WMF5.1
 - Произойдёт перезапуск сервера
 - После перезапуска установятся необходимые для дальнейшей работы модули
 - Произойдёт клонирование нужных репозиториев (с новой конфигурацией и самим Вэб-приложением) 
 - Создастся задание на применение новой конфигурации
 - Через 5 минут после создания задания оно должно выполниться и применить новую конфигурацию
 - В новой конфигурации выполняется создание тестового и основного сайтов, скопируется приложение в папку для тестового сайта, выполнится его проверка и, если нужно и возможно, исправление ошибок в конфигурации(replace "<system.web.>","<system.web>). Если этого будет достаточно, сайт должен заработать. Если это произойдёт, выполнится его копирование на "Прод"-площадку
 - Необхдимые права на папочки с сайтами так же будут назначены и выполнена отправка сообщения в Slack
 - После этого проверка конфигурации будет запускаться каждые 15 минут(по дефолту) и проверяться состояние
 - Если в репозитории обновится релиз, он будет просинхронизирован с локальной копией репозитория, скопирован на тестовую площадку и проверен. Если с ним всё в порядке, будет выполнено обновление прода.
 
 Залогом работоспособности сайта есть сохранность службы DSC и папочки со скомпилированной конфигурацией $env:SystemDrive\DSCconfig
 Всё остальное (я не имею ввиду операционную систему) можно сломать/удалить (рабочие папки со скриптами и папки с вэбсайтами)
 Основные логи ведутся в рабочем каталоге. Логи инициализации создаются рядом со скриптом инициализации.
После успешной отправки уведомления в Slack, сайт будет доступен по адресу http://localhost
